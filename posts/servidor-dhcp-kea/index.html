<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instalación y Uso de Servidor DHCP Kea | Mi Blog de Informática</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --bg: #0a0a0a;
      --bg2: #1a1a1a;
      --text: #e0e0e0;
      --text2: #a0a0a0;
      --accent: #4a9eff;
      --accent-hover: #66b3ff;
      --border: #404040;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }
    .header {
      background: var(--bg2);
      border-bottom: 2px solid var(--border);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .logo img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: 2px solid var(--accent);
      object-fit: cover;
    }
    .logo h1 {
      color: var(--accent);
      font-size: 1.5rem;
    }
    nav {
      display: flex;
      gap: 2rem;
    }
    nav a {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      transition: all 0.2s;
    }
    nav a:hover {
      color: var(--accent);
      background: rgba(74, 158, 255, 0.1);
    }
    .search-box {
      position: relative;
    }
    .search-box input {
      background: var(--bg);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 0.5rem 1rem 0.5rem 2.5rem;
      border-radius: 20px;
      font-size: 0.9rem;
      width: 250px;
    }
    .search-box input:focus {
      outline: none;
      border-color: var(--accent);
    }
    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text2);
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 3rem 2rem;
    }
    .footer {
      background: var(--bg2);
      border-top: 2px solid var(--border);
      padding: 3rem 0;
      margin-top: 4rem;
    }
    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 3rem;
    }
    .footer-section h3 {
      color: var(--accent);
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }
    .footer-section p,
    .footer-section a {
      color: var(--text2);
      text-decoration: none;
      display: block;
      margin: 0.5rem 0;
    }
    .footer-section a:hover {
      color: var(--accent);
    }
    .social-links {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    .social-links a {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 5px;
    }
    .social-links a:hover {
      border-color: var(--accent);
    }
    .footer-bottom {
      text-align: center;
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border);
      color: var(--text2);
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <div class="logo">
        <img src="/DoradoWeb-HTML/images/foto_perfil.jpeg" alt="josemaridorado02">
        <h1>Mi Blog de Informática</h1>
      </div>
      <nav>
        
        <a href="/DoradoWeb-HTML/">Inicio</a>
        
        <a href="/DoradoWeb-HTML/posts/">Blog</a>
        
        <a href="/DoradoWeb-HTML/about/">Sobre mí</a>
        
      </nav>
      <div class="search-box">
        <span class="search-icon">🔍</span>
        <input type="text" placeholder="Buscar artículos...">
      </div>
    </div>
  </header>
  
  <div class="container">
    
<style>
  article {
    max-width: 900px;
    margin: 0 auto;
  }
  article h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: #ffffff;
  }
  article small {
    color: #999;
    font-size: 0.95rem;
  }
  article > div {
    margin-top: 2rem;
    font-size: 1.1rem;
    line-height: 1.8;
  }
  article h2 { 
    font-size: 2rem; 
    color: #4a9eff;
    margin-top: 2.5rem;
    margin-bottom: 1rem;
  }
  article h3 { 
    font-size: 1.6rem; 
    color: #4a9eff;
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  article h4 { 
    font-size: 1.3rem;
    color: #e0e0e0;
    margin-top: 1.5rem;
    margin-bottom: 0.8rem;
  }
  article p { 
    color: #c0c0c0;
    margin-bottom: 1.5rem;
  }
  article ul, article ol {
    color: #c0c0c0;
    margin-bottom: 1.5rem;
    padding-left: 2rem;
  }
  article li {
    margin-bottom: 0.5rem;
  }
  article strong {
    color: #ffffff;
  }
  article code {
    background: #1a1a1a;
    color: #50fa7b;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-family: 'JetBrains Mono', monospace;
  }
  article pre {
    background: #1a1a1a;
    border: 1px solid #404040;
    border-radius: 8px;
    padding: 1.5rem;
    overflow-x: auto;
    margin-bottom: 1.5rem;
  }
  article pre code {
    background: transparent;
    padding: 0;
  }
  article blockquote {
    border-left: 4px solid #4a9eff;
    background: #1a1a1a;
    padding: 1rem 1.5rem;
    margin: 1.5rem 0;
    color: #c0c0c0;
  }
</style>

<article>
  <h1>Instalación y Uso de Servidor DHCP Kea</h1>
  <small>29 de enero de 2025</small>
  <div><h2 id="introducción">Introducción</h2>
<p>En este tutorial aprenderemos a configurar un servidor DHCP utilizando Kea, una implementación moderna y flexible del protocolo DHCP desarrollada por ISC (Internet Systems Consortium). Kea es el sucesor del clásico ISC DHCP Server y ofrece mejor rendimiento, mayor flexibilidad y una configuración basada en JSON.</p>
<h2 id="instalación-del-servidor-kea">Instalación del Servidor Kea</h2>
<p>Primero actualizamos el sistema e instalamos el servidor DHCP Kea:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt upgrade
</span></span><span style="display:flex;"><span>sudo apt install kea-dhcp4-server -y
</span></span></code></pre></div><h2 id="configuración-básica-del-servidor">Configuración Básica del Servidor</h2>
<p>La configuración de Kea se realiza en el archivo <code>/etc/kea/kea-dhcp4.conf</code>. Es importante tener cuidado con la sintaxis JSON, ya que cualquier error mínimo impedirá que el servicio funcione correctamente.</p>
<h3 id="configuración-para-la-red-muy-aislada">Configuración para la Red Muy Aislada</h3>
<p>Vamos a configurar un ámbito DHCP para la red muy aislada (172.16.0.0/16) con las siguientes características:</p>
<ul>
<li><strong>Rango de IPs</strong>: 172.16.0.10 - 172.16.0.100</li>
<li><strong>Máscara de red</strong>: 255.255.0.0 (/16)</li>
<li><strong>Puerta de enlace</strong>: 172.16.0.1</li>
<li><strong>Servidor DNS</strong>: 192.168.101.1</li>
<li><strong>Dirección de broadcast</strong>: 172.16.255.255</li>
<li><strong>Duración de la concesión</strong>: 30 minutos (1800 segundos)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Dhcp4&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;interfaces-config&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;interfaces&#34;</span>: [ <span style="color:#e6db74">&#34;enp7s0&#34;</span> ]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;lease-database&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;memfile&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;persist&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;/var/lib/kea/kea-leases4.csv&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;renew-timer&#34;</span>: <span style="color:#ae81ff">600</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;rebind-timer&#34;</span>: <span style="color:#ae81ff">900</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;valid-lifetime&#34;</span>: <span style="color:#ae81ff">1800</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;max-valid-lifetime&#34;</span>: <span style="color:#ae81ff">86400</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;subnet4&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;subnet&#34;</span>: <span style="color:#e6db74">&#34;172.16.0.0/16&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;pools&#34;</span>: [
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;pool&#34;</span>: <span style="color:#e6db74">&#34;172.16.0.10 - 172.16.0.100&#34;</span> }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;option-data&#34;</span>: [
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;routers&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;172.16.0.1&#34;</span> },
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;domain-name&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;router.josemaria.org&#34;</span> },
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;domain-name-servers&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;192.168.101.1&#34;</span> },
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;broadcast-address&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;172.16.255.255&#34;</span> }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="parámetros-de-temporización">Parámetros de Temporización</h3>
<ul>
<li><strong>renew-timer (600s)</strong>: Tiempo después del cual el cliente intentará renovar su concesión</li>
<li><strong>rebind-timer (900s)</strong>: Si falla la renovación, el cliente intentará contactar cualquier servidor DHCP</li>
<li><strong>valid-lifetime (1800s)</strong>: Duración total de la concesión (30 minutos)</li>
<li><strong>max-valid-lifetime (86400s)</strong>: Máxima duración permitida para una concesión (24 horas)</li>
</ul>
<h2 id="configuración-de-clientes">Configuración de Clientes</h2>
<h3 id="cliente-linux-fedora">Cliente Linux (Fedora)</h3>
<p>En sistemas Linux con NetworkManager, la configuración es sencilla:</p>
<ol>
<li>Acceder a la configuración de red</li>
<li>Seleccionar la interfaz correspondiente</li>
<li>Configurar el método IPv4 como &ldquo;Automático (DHCP)&rdquo;</li>
<li>Guardar y aplicar cambios</li>
</ol>
<p>Verificar la configuración obtenida:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ip addr show
</span></span><span style="display:flex;"><span>ping 8.8.8.8
</span></span></code></pre></div><h3 id="cliente-windows">Cliente Windows</h3>
<ol>
<li>Abrir &ldquo;Configuración de red e Internet&rdquo;</li>
<li>Seleccionar &ldquo;Ethernet&rdquo; o &ldquo;Wi-Fi&rdquo;</li>
<li>En &ldquo;Configuración de IP&rdquo;, establecer como &ldquo;Automático (DHCP)&rdquo;</li>
<li>Guardar cambios</li>
</ol>
<p>Verificar con:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>ipconfig /all
</span></span><span style="display:flex;"><span>ping google.com
</span></span></code></pre></div><h2 id="captura-del-proceso-dora">Captura del Proceso DORA</h2>
<p>El protocolo DHCP utiliza un proceso de cuatro pasos conocido como DORA (Discover, Offer, Request, Acknowledge). Podemos capturar estos paquetes usando <code>tcpdump</code>.</p>
<h3 id="captura-básica">Captura Básica</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo tcpdump -i enp7s0 -n <span style="color:#e6db74">&#34;udp port 67 or udp port 68&#34;</span> -c <span style="color:#ae81ff">4</span>
</span></span></code></pre></div><p>Resultado:</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 856 73"
      >
      <g transform='translate(8,16)'>
<path d='M 448,16 L 456,0' fill='none' stroke='currentColor'></path>
<path d='M 448,48 L 456,32' fill='none' stroke='currentColor'></path>
<text text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='0' y='20' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='0' y='36' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='0' y='52' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='8' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='8' y='20' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='8' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='8' y='52' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='16' y='20' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='16' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='16' y='52' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='24' y='20' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='24' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='24' y='52' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='32' y='4' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='32' y='20' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='32' y='36' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='32' y='52' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='40' y='20' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='40' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='40' y='52' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='48' y='20' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='48' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='48' y='52' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='56' y='20' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='56' y='36' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='56' y='52' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='64' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='64' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='64' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='72' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='72' y='20' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='72' y='36' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='72' y='52' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='80' y='20' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='80' y='36' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='80' y='52' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='88' y='4' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='88' y='20' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='88' y='36' fill='currentColor' style='font-size:1em'>9</text>
<text text-anchor='middle' x='88' y='52' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='96' y='4' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='96' y='20' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='96' y='36' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='96' y='52' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='104' y='20' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='104' y='36' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='104' y='52' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='112' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='112' y='36' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='112' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='128' y='20' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='128' y='36' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='128' y='52' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='136' y='20' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='136' y='36' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='136' y='52' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='152' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='152' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='152' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='160' y='20' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='160' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='160' y='52' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='168' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='168' y='20' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='168' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='168' y='52' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='176' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='176' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='176' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='176' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='184' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='184' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='184' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='184' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='192' y='20' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='192' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='192' y='52' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='200' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='200' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='200' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='208' y='20' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='208' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='208' y='52' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='216' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='216' y='36' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='216' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='224' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='224' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='224' y='36' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='224' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='232' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='232' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='240' y='4' fill='currentColor' style='font-size:1em'>&gt;</text>
<text text-anchor='middle' x='240' y='20' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='240' y='36' fill='currentColor' style='font-size:1em'>&gt;</text>
<text text-anchor='middle' x='240' y='52' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='248' y='20' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='248' y='52' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='256' y='36' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='264' y='20' fill='currentColor' style='font-size:1em'>&gt;</text>
<text text-anchor='middle' x='264' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='264' y='52' fill='currentColor' style='font-size:1em'>&gt;</text>
<text text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='272' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='280' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='280' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='280' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='280' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='288' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='288' y='20' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='288' y='36' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='288' y='52' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='296' y='20' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='296' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='296' y='52' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='304' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='304' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='304' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='304' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='312' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='312' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='312' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='312' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='320' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='320' y='20' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='320' y='36' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='320' y='52' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='328' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='328' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='328' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='328' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='336' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='336' y='20' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='336' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='336' y='52' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='344' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='344' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='344' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='344' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='352' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='352' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='352' y='36' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='352' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='360' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='360' y='20' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='360' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='360' y='52' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='368' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='368' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='368' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='368' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='376' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='376' y='20' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='376' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='376' y='52' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='384' y='4' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='384' y='20' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='384' y='36' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='384' y='52' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='392' y='4' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='392' y='20' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='392' y='36' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='392' y='52' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='400' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='400' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='408' y='20' fill='currentColor' style='font-size:1em'>B</text>
<text text-anchor='middle' x='408' y='52' fill='currentColor' style='font-size:1em'>B</text>
<text text-anchor='middle' x='416' y='4' fill='currentColor' style='font-size:1em'>B</text>
<text text-anchor='middle' x='416' y='20' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='416' y='36' fill='currentColor' style='font-size:1em'>B</text>
<text text-anchor='middle' x='416' y='52' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='424' y='4' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='424' y='20' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='424' y='36' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='424' y='52' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='432' y='4' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='432' y='20' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='432' y='36' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='432' y='52' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='440' y='4' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='440' y='20' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='440' y='36' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='440' y='52' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='448' y='4' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='448' y='36' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='456' y='20' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='456' y='52' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='464' y='4' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='464' y='20' fill='currentColor' style='font-size:1em'>H</text>
<text text-anchor='middle' x='464' y='36' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='464' y='52' fill='currentColor' style='font-size:1em'>H</text>
<text text-anchor='middle' x='472' y='4' fill='currentColor' style='font-size:1em'>H</text>
<text text-anchor='middle' x='472' y='20' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='472' y='36' fill='currentColor' style='font-size:1em'>H</text>
<text text-anchor='middle' x='472' y='52' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='480' y='4' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='480' y='20' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='480' y='36' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='480' y='52' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='488' y='4' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='488' y='20' fill='currentColor' style='font-size:1em'>,</text>
<text text-anchor='middle' x='488' y='36' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='488' y='52' fill='currentColor' style='font-size:1em'>,</text>
<text text-anchor='middle' x='496' y='4' fill='currentColor' style='font-size:1em'>,</text>
<text text-anchor='middle' x='496' y='36' fill='currentColor' style='font-size:1em'>,</text>
<text text-anchor='middle' x='504' y='20' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='504' y='52' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='512' y='4' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='512' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='512' y='36' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='512' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='520' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='520' y='20' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='520' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='520' y='52' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='528' y='4' fill='currentColor' style='font-size:1em'>q</text>
<text text-anchor='middle' x='528' y='20' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='528' y='36' fill='currentColor' style='font-size:1em'>q</text>
<text text-anchor='middle' x='528' y='52' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='536' y='4' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='536' y='20' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='536' y='36' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='536' y='52' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='544' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='544' y='20' fill='currentColor' style='font-size:1em'>,</text>
<text text-anchor='middle' x='544' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='544' y='52' fill='currentColor' style='font-size:1em'>,</text>
<text text-anchor='middle' x='552' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='552' y='36' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='560' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='560' y='20' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='560' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='560' y='52' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='568' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='568' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='576' y='4' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='576' y='20' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='576' y='36' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='576' y='52' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='584' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='584' y='20' fill='currentColor' style='font-size:1em'>g</text>
<text text-anchor='middle' x='584' y='36' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='584' y='52' fill='currentColor' style='font-size:1em'>g</text>
<text text-anchor='middle' x='592' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='592' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='592' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='592' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='600' y='4' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='600' y='20' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='600' y='36' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='600' y='52' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='616' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='616' y='20' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='616' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='616' y='52' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='624' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='624' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='624' y='36' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='624' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='632' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='632' y='20' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='632' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='632' y='52' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='640' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='640' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='648' y='4' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='648' y='36' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='656' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='656' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='664' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='664' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='672' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='672' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='680' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='680' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='688' y='4' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='688' y='36' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='696' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='696' y='36' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='704' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='704' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='712' y='4' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='712' y='36' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='720' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='720' y='36' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='728' y='4' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='728' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='736' y='4' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='736' y='36' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='744' y='4' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='744' y='36' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='752' y='4' fill='currentColor' style='font-size:1em'>,</text>
<text text-anchor='middle' x='752' y='36' fill='currentColor' style='font-size:1em'>,</text>
<text text-anchor='middle' x='768' y='4' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='768' y='36' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='776' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='776' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='784' y='4' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='784' y='36' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='792' y='4' fill='currentColor' style='font-size:1em'>g</text>
<text text-anchor='middle' x='792' y='36' fill='currentColor' style='font-size:1em'>g</text>
<text text-anchor='middle' x='800' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='800' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='808' y='4' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='808' y='36' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='824' y='4' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='824' y='36' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='832' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='832' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='840' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='840' y='36' fill='currentColor' style='font-size:1em'>0</text>
</g>

    </svg>
  
</div>
<h3 id="captura-detallada">Captura Detallada</h3>
<p>Para obtener información más completa, usamos el flag <code>-v</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo tcpdump -i enp7s0 -n <span style="color:#e6db74">&#34;udp port 67 or udp port 68&#34;</span> -v
</span></span></code></pre></div><h3 id="análisis-del-proceso-dora">Análisis del Proceso DORA</h3>
<p><strong>1. DISCOVER</strong> - El cliente busca servidor DHCP</p>
<p>El cliente con MAC <code>52:54:00:38:d2:d6</code> envía un mensaje de broadcast solicitando un servidor DHCP. Puede solicitar una IP específica (como 172.16.0.10 si la tuvo anteriormente) y pide parámetros como máscara de red, puerta de enlace, servidores DNS, nombre de dominio, entre otros.</p>
<p><strong>2. OFFER</strong> - El servidor ofrece configuración</p>
<p>El servidor DHCP (172.16.0.1) responde ofreciendo la IP 172.16.0.10 junto con toda la configuración:</p>
<ul>
<li>Máscara de red: 255.255.0.0</li>
<li>Puerta de enlace: 172.16.0.1</li>
<li>Servidor DNS: 192.168.101.1</li>
<li>Nombre de dominio: router.josemaria.org</li>
<li>Broadcast: 172.16.255.255</li>
<li>Tiempo de concesión: 1800 segundos (30 minutos)</li>
<li>Tiempo de renovación (RN): 600 segundos (10 minutos)</li>
<li>Tiempo de rebind (RB): 900 segundos (15 minutos)</li>
</ul>
<p><strong>3. REQUEST</strong> - El cliente acepta la oferta</p>
<p>El cliente confirma que acepta la IP 172.16.0.10 del servidor 172.16.0.1, incluyendo su dirección MAC y solicitando los parámetros de configuración.</p>
<p><strong>4. ACK</strong> - El servidor confirma definitivamente</p>
<p>El servidor confirma la concesión enviando todos los parámetros validados. A partir de este momento, la IP es válida durante 30 minutos.</p>
<h2 id="comportamiento-ante-fallo-del-servidor">Comportamiento ante Fallo del Servidor</h2>
<p>Para probar el comportamiento de los clientes cuando el servidor DHCP no está disponible, configuramos tiempos de concesión muy cortos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;renew-timer&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">60</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;rebind-timer&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">60</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;valid-lifetime&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">20</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;max-valid-lifetime&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">40</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span></code></pre></div><p>Detenemos el servidor:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl stop kea-dhcp4-server.service
</span></span><span style="display:flex;"><span>sudo systemctl status kea-dhcp4-server.service
</span></span></code></pre></div><h3 id="comportamiento-en-windows">Comportamiento en Windows</h3>
<p>Cuando Windows no puede renovar su concesión DHCP, automáticamente se asigna una dirección APIPA (Automatic Private IP Addressing) en el rango 169.254.1.0 - 169.254.254.255. Esto permite cierta comunicación local, pero sin acceso a internet ni a redes externas.</p>
<h3 id="comportamiento-en-linux">Comportamiento en Linux</h3>
<p>En distribuciones Linux, el comportamiento es más estricto. Cuando expira la concesión y no hay servidor DHCP disponible, normalmente se pierde la dirección IP y la interfaz queda sin configuración de red, a menos que esté configurado para mantener la última concesión conocida.</p>
<h2 id="cambio-de-configuración-en-caliente">Cambio de Configuración en Caliente</h2>
<p>Veamos qué sucede cuando cambiamos la configuración del servidor DHCP mientras los clientes ya tienen direcciones asignadas.</p>
<h3 id="forzar-renovación-en-linux">Forzar Renovación en Linux</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dhclient -r    <span style="color:#75715e"># Libera la concesión actual</span>
</span></span><span style="display:flex;"><span>dhclient       <span style="color:#75715e"># Solicita nueva configuración</span>
</span></span></code></pre></div><h3 id="forzar-renovación-en-windows">Forzar Renovación en Windows</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>ipconfig /release    # Libera la concesión actual
</span></span><span style="display:flex;"><span>ipconfig /renew      # Solicita nueva configuración
</span></span></code></pre></div><h3 id="cambio-del-rango-de-direcciones">Cambio del Rango de Direcciones</h3>
<p>Modificamos el pool de direcciones en <code>/etc/kea/kea-dhcp4.conf</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;pools&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#f92672">&#34;pool&#34;</span>: <span style="color:#e6db74">&#34;172.16.0.20 - 172.16.0.100&#34;</span> }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>Aplicamos los cambios:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl restart kea-dhcp4-server.service
</span></span></code></pre></div><p><strong>¿Qué sucede?</strong></p>
<p>Cuando llega el momento de renovación (definido por <code>renew-timer</code>), el cliente intenta renovar su IP actual. Si esa IP ya no está en el nuevo rango configurado, el servidor responde con un <strong>NACK</strong> (rechazo negativo). Al recibir el NACK, el cliente abandona inmediatamente su configuración y reinicia el proceso completo de obtención de IP, esta vez recibiendo una dirección del nuevo rango válido.</p>
<h2 id="configuración-multi-red">Configuración Multi-Red</h2>
<p>Kea permite gestionar múltiples subredes desde un único servidor. Vamos a añadir una segunda red para la &ldquo;red aislada&rdquo;.</p>
<h3 id="configuración-con-dos-subredes">Configuración con Dos Subredes</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Dhcp4&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;interfaces-config&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;interfaces&#34;</span>: [ <span style="color:#e6db74">&#34;enp7s0&#34;</span>, <span style="color:#e6db74">&#34;enp8s0&#34;</span> ]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;lease-database&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;memfile&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;persist&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;/var/lib/kea/kea-leases4.csv&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;renew-timer&#34;</span>: <span style="color:#ae81ff">600</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;rebind-timer&#34;</span>: <span style="color:#ae81ff">900</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;valid-lifetime&#34;</span>: <span style="color:#ae81ff">86400</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;max-valid-lifetime&#34;</span>: <span style="color:#ae81ff">86400</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;subnet4&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;subnet&#34;</span>: <span style="color:#e6db74">&#34;172.16.0.0/16&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;pools&#34;</span>: [
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;pool&#34;</span>: <span style="color:#e6db74">&#34;172.16.0.10 - 172.16.0.100&#34;</span> }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;option-data&#34;</span>: [
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;routers&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;172.16.0.1&#34;</span> },
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;domain-name&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;router.muyaislada.org&#34;</span> },
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;domain-name-servers&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;192.168.101.1&#34;</span> },
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;broadcast-address&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;172.16.255.255&#34;</span> }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;subnet&#34;</span>: <span style="color:#e6db74">&#34;192.168.100.0/24&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;pools&#34;</span>: [
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;pool&#34;</span>: <span style="color:#e6db74">&#34;192.168.100.11 - 192.168.100.254&#34;</span> }
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;option-data&#34;</span>: [
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;routers&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;192.168.100.2&#34;</span> },
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;domain-name&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;router.aislada.org&#34;</span> },
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;domain-name-servers&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;192.168.101.1&#34;</span> },
</span></span><span style="display:flex;"><span>          { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;broadcast-address&#34;</span>, <span style="color:#f92672">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;192.168.100.255&#34;</span> }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Esta configuración permite:</p>
<ul>
<li><strong>Red muy aislada</strong> (172.16.0.0/16): Concesiones de 30 minutos</li>
<li><strong>Red aislada</strong> (192.168.100.0/24): Concesiones de 24 horas</li>
</ul>
<h2 id="reservas-dhcp-ip-estática-via-dhcp">Reservas DHCP (IP Estática via DHCP)</h2>
<p>Las reservas DHCP permiten asignar siempre la misma IP a un dispositivo específico basándose en su dirección MAC. Esto combina las ventajas de IP estática (dirección predecible) con las de DHCP (gestión centralizada).</p>
<h3 id="crear-una-reserva">Crear una Reserva</h3>
<p>Para reservar la IP 192.168.100.3 para nuestro servidor web:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;reservations&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> [
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;hw-address&#34;</span>: <span style="color:#e6db74">&#34;52:54:00:6d:30:5d&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ip-address&#34;</span>: <span style="color:#e6db74">&#34;192.168.100.3&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;hostname&#34;</span>: <span style="color:#e6db74">&#34;ServidorWeb&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>Esta reserva debe colocarse dentro de la definición de la subred correspondiente.</p>
<h3 id="configurar-el-cliente-para-dhcp">Configurar el Cliente para DHCP</h3>
<p>Aunque tengamos una reserva, el servidor debe estar configurado para obtener su IP por DHCP:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nano /etc/netplan/50-cloud-init.yaml
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">network</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">version</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ethernets</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enp1s0</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">dhcp4</span>: <span style="color:#66d9ef">yes</span>
</span></span></code></pre></div><p>Aplicar cambios:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo netplan apply
</span></span></code></pre></div><h2 id="router-con-ip-dinámica">Router con IP Dinámica</h2>
<p>En algunos escenarios, el propio router puede obtener su configuración de red por DHCP desde una red upstream (como una red NAT o la conexión a Internet).</p>
<h3 id="configurar-interfaz-para-dhcp">Configurar Interfaz para DHCP</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nano /etc/network/interfaces
</span></span></code></pre></div>


<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 184 41"
      >
      <g transform='translate(8,16)'>
<text text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='0' y='20' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='8' y='4' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='8' y='20' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='16' y='20' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='24' y='20' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='32' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='48' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='56' y='20' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='64' y='20' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='72' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='72' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='80' y='20' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='88' y='20' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='104' y='20' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='112' y='20' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='120' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='128' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='144' y='20' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='152' y='20' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='160' y='20' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='168' y='20' fill='currentColor' style='font-size:1em'>p</text>
</g>

    </svg>
  
</div>
<p>Reiniciar la interfaz:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo ifdown enp1s0 <span style="color:#f92672">&amp;&amp;</span> sudo ifup enp1s0
</span></span></code></pre></div><h3 id="ajustar-reglas-de-nat-para-masquerade">Ajustar Reglas de NAT para MASQUERADE</h3>
<p>Cuando la interfaz WAN del router tiene IP dinámica, no podemos usar SNAT con una dirección fija. En su lugar, utilizamos <strong>MASQUERADE</strong>, que se adapta automáticamente a cualquier IP que tenga la interfaz:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Regla de enmascaramiento (SNAT dinámico)</span>
</span></span><span style="display:flex;"><span>iptables -t nat -A POSTROUTING -o enp1s0 -j MASQUERADE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DNAT para servicios (ejemplo: servidor web)</span>
</span></span><span style="display:flex;"><span>iptables -t nat -A PREROUTING -i enp1s0 -p tcp --dport <span style="color:#ae81ff">80</span> -j DNAT --to-destination 192.168.100.3
</span></span></code></pre></div><p><strong>Diferencia entre SNAT y MASQUERADE:</strong></p>
<ul>
<li><strong>SNAT</strong>: Requiere especificar la IP de salida (<code>--to-source 1.2.3.4</code>). Más eficiente pero solo funciona con IP fija.</li>
<li><strong>MASQUERADE</strong>: Detecta automáticamente la IP de la interfaz. Ligeramente menos eficiente pero necesario para IPs dinámicas.</li>
</ul>
<h3 id="verificar-conectividad">Verificar Conectividad</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ping 8.8.8.8
</span></span></code></pre></div><p>Resultado esperado:</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 440 73"
      >
      <g transform='translate(8,16)'>
<text text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='0' y='20' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='0' y='36' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='0' y='52' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='8' y='4' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='8' y='20' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='8' y='36' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='8' y='52' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'>G</text>
<text text-anchor='middle' x='24' y='20' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='24' y='36' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='24' y='52' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='32' y='20' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='32' y='36' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='32' y='52' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='40' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='40' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='40' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='48' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='48' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='48' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='56' y='20' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='56' y='36' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='56' y='52' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='72' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='72' y='20' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='72' y='36' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='72' y='52' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='80' y='20' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='80' y='36' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='80' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='88' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='88' y='20' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='88' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='88' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='96' y='20' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='96' y='36' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='96' y='52' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'>(</text>
<text text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='112' y='20' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='112' y='36' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='112' y='52' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='120' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='120' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='120' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='128' y='20' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='128' y='36' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='128' y='52' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='136' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='136' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='136' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='144' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='144' y='20' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='144' y='36' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='144' y='52' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='152' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='152' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='152' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='160' y='20' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='160' y='36' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='160' y='52' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='168' y='4' fill='currentColor' style='font-size:1em'>)</text>
<text text-anchor='middle' x='168' y='20' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='168' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='168' y='52' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='184' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='184' y='20' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='184' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='184' y='52' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='192' y='20' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='192' y='36' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='192' y='52' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'>(</text>
<text text-anchor='middle' x='200' y='20' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='200' y='36' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='200' y='52' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='208' y='20' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='208' y='36' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='208' y='52' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='216' y='20' fill='currentColor' style='font-size:1em'>_</text>
<text text-anchor='middle' x='216' y='36' fill='currentColor' style='font-size:1em'>_</text>
<text text-anchor='middle' x='216' y='52' fill='currentColor' style='font-size:1em'>_</text>
<text text-anchor='middle' x='224' y='4' fill='currentColor' style='font-size:1em'>)</text>
<text text-anchor='middle' x='224' y='20' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='224' y='36' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='224' y='52' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='232' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='232' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='232' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='240' y='4' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='240' y='20' fill='currentColor' style='font-size:1em'>q</text>
<text text-anchor='middle' x='240' y='36' fill='currentColor' style='font-size:1em'>q</text>
<text text-anchor='middle' x='240' y='52' fill='currentColor' style='font-size:1em'>q</text>
<text text-anchor='middle' x='248' y='4' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='248' y='20' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='248' y='36' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='248' y='52' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='256' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='256' y='36' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='256' y='52' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='272' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='272' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='272' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='280' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='280' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='280' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='288' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='288' y='20' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='288' y='36' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='288' y='52' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='296' y='20' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='296' y='36' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='296' y='52' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='304' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='304' y='36' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='304' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='312' y='4' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='312' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='312' y='36' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='312' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='320' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='320' y='20' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='320' y='36' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='320' y='52' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='328' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='336' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='336' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='336' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='336' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='344' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='344' y='20' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='344' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='344' y='52' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='352' y='20' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='352' y='36' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='352' y='52' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='360' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='360' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='360' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='368' y='20' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='368' y='36' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='368' y='52' fill='currentColor' style='font-size:1em'>=</text>
<text text-anchor='middle' x='376' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='376' y='36' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='376' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='384' y='20' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='384' y='36' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='384' y='52' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='392' y='20' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='392' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='392' y='52' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='400' y='20' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='400' y='36' fill='currentColor' style='font-size:1em'>9</text>
<text text-anchor='middle' x='400' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='416' y='20' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='416' y='36' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='416' y='52' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='424' y='20' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='424' y='36' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='424' y='52' fill='currentColor' style='font-size:1em'>s</text>
</g>

    </svg>
  
</div>
<h2 id="consideraciones-importantes">Consideraciones Importantes</h2>
<h3 id="persistencia-de-concesiones">Persistencia de Concesiones</h3>
<p>Kea almacena las concesiones activas en <code>/var/lib/kea/kea-leases4.csv</code>. Este archivo permite que el servidor recuerde las asignaciones incluso después de un reinicio.</p>
<h3 id="logs-del-servidor">Logs del Servidor</h3>
<p>Los logs de Kea se encuentran en:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo journalctl -u kea-dhcp4-server.service -f
</span></span></code></pre></div><h3 id="validación-de-configuración">Validación de Configuración</h3>
<p>Antes de reiniciar el servicio, es recomendable validar la sintaxis JSON:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /etc/kea/kea-dhcp4.conf | python3 -m json.tool
</span></span></code></pre></div><p>Si hay errores de sintaxis, este comando los mostrará.</p>
<h3 id="resolución-de-nombres-dns">Resolución de Nombres DNS</h3>
<p>Cuando cambiamos la configuración de red del servidor donde corre el DNS, es importante actualizar también la configuración DHCP para que los clientes sigan teniendo resolución de nombres correcta.</p>
<h2 id="conclusión">Conclusión</h2>
<p>Kea es un servidor DHCP moderno, flexible y potente que permite configuraciones avanzadas mediante archivos JSON. Algunas de sus ventajas principales son:</p>
<ul>
<li><strong>Gestión multi-red</strong> desde un único servidor</li>
<li><strong>Reservas dinámicas</strong> para mantener IPs predecibles</li>
<li><strong>Configuración clara</strong> y bien estructurada</li>
<li><strong>Logs detallados</strong> para troubleshooting</li>
<li><strong>Alto rendimiento</strong> para redes de gran escala</li>
</ul>
<p>Dominar DHCP es fundamental para cualquier administrador de redes, ya que permite una gestión eficiente y escalable del direccionamiento IP en cualquier infraestructura.</p>
</div>
</article>

  </div>
  
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-section">
        <h3>Sobre el Blog</h3>
        <p>Blog sobre tecnología, programación y desarrollo web</p>
        <p>Creado por <strong>josemaridorado02</strong></p>
      </div>
      
      <div class="footer-section">
        <h3>Navegación</h3>
        
        <a href="/DoradoWeb-HTML/">Inicio</a>
        
        <a href="/DoradoWeb-HTML/posts/">Blog</a>
        
        <a href="/DoradoWeb-HTML/about/">Sobre mí</a>
        
      </div>
      
      <div class="footer-section">
        <h3>Contacto</h3>
        <div class="social-links">
          <a href="https://github.com/josemaridorado02" target="_blank">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
            </svg>
            <span>GitHub</span>
          </a>
          <a href="mailto:josemariaoteodorado12@gmail.com">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"/>
            </svg>
            <span>Email</span>
          </a>
        </div>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Mi Blog de Informática. Todos los derechos reservados.</p>
    </div>
  </footer>
</body>
</html>
